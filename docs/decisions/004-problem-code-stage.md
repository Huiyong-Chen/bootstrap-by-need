# Decision 004: 故意保留问题代码，记录重构时机

## 背景 (Context)

在引入 TypeScript 后，项目复杂度快速增长。代码中出现了各种问题：

1. **拼写错误**：`rolesSelectorRedner` 函数名拼写错误
2. **作用域问题**：`questionRatioList` 变量在错误的作用域中使用
3. **代码冗余**：变量重复初始化
4. **职责混乱**：单文件承担过多职责

## 决策 (Decision)

**故意保留这些问题代码**，记录当前状态，为后续重构做准备。

## 具体问题记录

### 拼写错误
- 函数名 `rolesSelectorRedner` 应为 `rolesSelectorRender`
- 出现在 `src/home/index.ts` 和 `src/import-questions/index.ts` 中

### 作用域问题
- `questionRatioList` 在事件监听器中使用，但在函数内部定义
- 可能导致页面加载时的 undefined 错误

### 代码冗余
- `questionRatioList` 在多处被重复初始化为空对象
- 增加了代码维护的复杂性

## 收益 (Positive)

1. **记录真实状态**：保留了代码演进的真实轨迹
2. **验证重构时机**：为后续重构提供了明确的痛点证据
3. **教学价值**：展示了代码问题积累到一定程度时重构的必要性

## 代价/约束 (Negative)

1. **临时风险**：问题代码可能导致运行时错误
2. **维护困难**：新开发者可能被现有问题代码迷惑
3. **技术债务**：这些问题需要在后续阶段解决

## 替代方案 (Alternatives Considered)

- **立即修复**：直接修复所有问题，但失去了记录重构时机的机会
- **代码审查**：通过人工审查发现问题，但无法量化问题严重程度

## 结论

保留问题代码是为了更好地记录"按需搭建"的过程。只有当问题积累到影响开发效率时，重构才有真正的价值。
