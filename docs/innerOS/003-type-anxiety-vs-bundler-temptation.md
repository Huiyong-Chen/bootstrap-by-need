# Inner OS: 类型焦虑与打包工具的诱惑

**时间点**：Stage 2 结束，代码文件数量达到 ~15 个  
**状态**：功能开发受阻，调试时间变长

---

### 崩溃瞬间

今天早上我只是把 `QuestionInfo` 对象的 `question` 字段重命名为 `title`，以便更好地表达题目的含义。
这是一个很常见的重构。
结果，我在浏览器里点点点，跑通了主流程，却在下午发现一个边缘的渲染函数崩了——因为它还在尝试读取 `questionInfo.question`。

控制台红通通的 `Uncaught TypeError: Cannot read properties of undefined` 让我非常烦躁。
这已经是本周好几次发生这种“改了这里，忘了那里”的事故了。

### 诱惑：为什么不直接上 Vite？

我的第一反应是：_“受不了了，我要重构，我要 TS。”_
既然要上 TS，那我是不是该把 Vite 也装上？毕竟现在大家都是这么做的。
`npm create vite` 一行命令，热更新、打包、TS、CSS 预处理全都有了，多省事。

### 挣扎：我真的需要打包吗？

且慢。
我又看了一眼 Chrome DevTools 的 Network 面板。
目前加载的 JS 文件只有 15 个，总耗时不到 100ms。
浏览器并没有因为请求过多而阻塞。

如果我现在引入 Vite（打包工具）：

1. 我看到的将不再是清晰的文件列表，而是一个巨大的 `bundle.js`（或者几个 chunk）。
2. 我原本“所见即所得”的 ESM 引用关系，会被打包工具接管和魔改。
3. 我不仅引入了 TS 的复杂度，还引入了构建工具配置的复杂度。

**打包是用来解决“网络性能瓶颈”的，而我现在遇到的是“代码维护瓶颈”。**
这是两个不同的病，不能乱吃药。

### 决定：资产优先，优化靠后

类型系统（TypeScript）属于**代码资产**，它能固化业务逻辑，减少未来的认知负荷。
打包构建（Bundler）属于**交付优化**，它能提升用户侧的加载速度。

**我还不需要“优化”，但我现在迫切需要“资产保护”。**

所以，我决定走一条“中间路线”：
只引入 `typescript` 编译器。
把 `.ts` 变成 `.js`，然后依然扔给浏览器去跑。
虽然这需要我运行一个 `tsc --watch` 进程，虽然这要求我在 TS 里写丑陋的 `.js` 后缀引入，但这是为了**保持架构的透明度**所付出的最小代价。

我要看着那个 `dist/` 文件夹生成，我要清楚地知道我的 TS 变成了什么样子的 JS。
