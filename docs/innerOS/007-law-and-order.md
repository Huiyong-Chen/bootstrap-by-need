# 007 - 法律与秩序：从自律走向法治

## 1. 秩序的崩塌 (The Broken Window)

随着 Stage 6 将源码全量迁移至 `.mts`，原本隐蔽的问题开始暴露。
最直接的打击来自编译器：泛型箭头函数 `<T>(arg: T)` 被错误解析为 JSX 标签。
同时，随着文件数量增加，我发现自己开始在 Code Review（即使是自己 Review 自己）中纠结琐事：
“这里为什么用了双引号？” “这个 import 没用到为什么不删？”
**认知负荷（Cognitive Load）应该花在业务逻辑上，而不是花在分号和缩进上。**

## 2. 立法：代码即法律 (Code as Law)

我不需要一份写在 Wiki 里的《代码规范文档》，因为没人会每次提交前都背一遍。
我需要一套**可执行的法律**。

- **Prettier** 是排版工，它让所有代码长得一样。
- **ESLint (v9)** 是检察官，它拦截潜在的 Bug 和不规范写法。
- **配置即代码**：我坚持使用 `.mjs` 和 `.mts` 编写配置文件。这不仅是为了统一架构风格，更是为了享受类型提示带来的安全感。

## 3. 执法：自动化与仪式感 (Enforcement & Ritual)

有了法律，还得有警察。否则 `npm run lint` 就会变成一句空话。
我引入了 **Husky** 和 **lint-staged**。
这是一种**“拒绝式”**的工程哲学：Bad Code 甚至没有资格进入暂存区。

但我没有止步于此。
我将 `lint-staged` 的配置从 `package.json` 中抽离，并引入了 **Commitlint**。
这不仅仅是为了强制写 `feat:`，这是为了给开发过程赋予一种**“仪式感”**。
每一次 Commit，都是对代码库的一次郑重交付，必须清晰、规范、负责。

## 4. 结论

Stage 7 并没有产出任何业务功能，但它让项目从“能跑的草台班子”变成了“正规军”。
从此，**秩序不再是负担，而是效率的基石。**
