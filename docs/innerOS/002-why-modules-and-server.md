# 02. 此时此刻，我为什么还是拒绝 Vite？

## 现状
我的 `index.js` 代码量虽然不多，但已经开始有了“坏味道”。
数据（Data）和渲染逻辑（Render）混在一起。如果我想增加新的功能，比如“历史记录”或“多种抽取模式”，这个文件会迅速膨胀成面条代码。

## 冲动
我想拆文件。我想把数据单独放在 `data.js` 里，把逻辑放在 `logic.js` 里。
按照以往的习惯，我甚至想直接 `npm create vite`，然后用 TS 写一个 `useLottery` hook。

## 克制
慢着。
拆文件一定要上构建工具吗？
浏览器原生其实早就支持 `<script type="module">` 了。
为什么我不直接用 ES Modules？

## 遭遇现实
当我兴奋地把 `index.js` 拆分成 `import` 形式并在浏览器打开时，控制台甩给了我一个红色的错误：
> `Access to script at '...' from origin 'null' has been blocked by CORS policy`

这就尴尬了。浏览器处于安全考虑，禁止 `file://` 协议下的跨域请求（ESM 的 import 被视为请求）。

## 决策时刻
现在的选项：
1. **退回去**：不拆文件了，忍受面条代码。（不可接受，维护性太差）
2. **上打包工具**：用 Webpack/Vite 把文件打成一个包，这样就能继续用 file 协议打开了。（杀鸡焉用牛刀，引入了编译复杂度）
3. **改变运行时**：既然 `file://` 不行，那我就给你一个 `http://`。

## 结论
我需要的不是“打包”，而是一个“服务器”。
我需要引入 `package.json` 了，不是为了 build，而是为了启动一个最简单的静态资源服务器。
只要有个 Server，原生模块化就能跑起来。

**现在，代码依然是“所写即所跑”，不需要编译，但我拥有了模块化的能力。**